{% extends "base.html" %}

{% block content %}
<h2 class="mb-4 text-center">ðŸ“ˆ Monthly Profit Report</h2>

<div class="card mb-4">
    <div class="card-body">
        <div class="row text-center">
            <div class="col-md-4">
                <h5>Total Sales</h5>
                <h3 class="text-success">{{ CURRENCY_SYMBOL }} {{ "%.2f"|format(grand_sales) }}</h3>
            </div>
            <div class="col-md-4">
                <h5>Total Expenditure</h5>
                <h3 class="text-danger">{{ CURRENCY_SYMBOL }} {{ "%.2f"|format(grand_exp) }}</h3>
            </div>
            <div class="col-md-4">
                <h5>Net Profit</h5>
                <h3 class="{% if grand_profit >= 0 %}text-success{% else %}text-danger{% endif %}">
                    {{ CURRENCY_SYMBOL }} {{ "%.2f"|format(grand_profit) }}
                </h3>
            </div>
        </div>
    </div>
</div>

{% if report %}
<table class="table table-striped table-hover">
    <thead class="table-primary">
        <tr>
            <th>Month</th>
            <th>Sales</th>
            <th>Expenditure</th>
            <th>Profit</th>
        </tr>
    </thead>
    <tbody>
        {% for row in report %}
        <tr>
            <td><strong>{{ row.month }}</strong></td>
            <td class="text-success">{{ CURRENCY_SYMBOL }} {{ "%.2f"|format(row.sales) }}</td>
            <td class="text-danger">{{ CURRENCY_SYMBOL }} {{ "%.2f"|format(row.expenditure) }}</td>
            <td class="{% if row.profit >= 0 %}text-success{% else %}text-danger{% endif %} fw-bold">
                {{ CURRENCY_SYMBOL }} {{ "%.2f"|format(row.profit) }}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info text-center">
    No data yet. Make sales and add expenditures to see monthly report.
</div>
{% endif %}

<div class="text-center mt-4 no-print">
    <button onclick="window.print()" class="btn btn-success btn-lg">Print / Save as PDF</button>
    <a href="{{ url_for('home') }}" class="btn btn-secondary btn-lg ms-3">Back to Home</a>
</div>
{% endblock %}